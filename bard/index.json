// Import the Fetch API
const fetch = require('fetch');

// Fetch the data from the API
const url = 'https://northerly-robin-8705.dataplicity.io/mtws-iqaamah-times/all';
fetch(url)
  .then(response => response.json())
  .then(data => {
    // Update the DOM with the data
    const times = document.getElementById('times');
    times.innerHTML = JSON.stringify(data, null, 2);
  });

// Create a function to edit the times
function editTimes() {
  // Get the current times
  const times = document.getElementById('times').textContent;

  // Create a new time picker
  const timePicker = new TimePicker();

  // Set the time picker's values
  timePicker.setValues(times);

  // Add an event listener to the time picker's change event
  timePicker.on('change', () => {
    // Get the new times
    const newTimes = timePicker.getValues();

    // Update the DOM with the new times
    document.getElementById('times').textContent = newTimes;

    // Post the new times back to the API
    const url = 'https://api.example.com/times';
    fetch(url, {
      method: 'POST',
      body: JSON.stringify(newTimes),
      headers: {
        'Content-Type': 'application/json'
      }
    })
      .then(response => response.json())
      .then(data => {
        console.log('The times were successfully updated.');
      });
  });
}

// Add an event listener to the body's click event
document.body.addEventListener('click', editTimes);
